<app-header></app-header>

<div class="loading" *ngIf="!game">
    <h1>Error. Game not found.</h1>
    <a routerLink="/games">Go back</a>
</div>

<mat-tab-group>
    <mat-tab label="Game Details"> 
        <div class="game-details" *ngIf="game">
            <h1>{{ game.title }}</h1>
            <p><small>{{ game.genre }}</small></p>
            <img src="{{ game.imageUrl }}" alt="{{ game.title }}">
            <p>{{ game.description }}</p>

            <a routerLink="/update/{{ game._id }}">
                <button [ngStyle]="{ 'background-color': 'green' }">Update</button>
            </a>
            <button [ngStyle]="{ 'background-color': 'red' }" (click)="onDeleteGame()">Delete</button>
            
            <a routerLink="/games">
                <button>Go Back</button>
            </a>
        </div>
    </mat-tab>

    <div *ngIf="game">
        <mat-tab label="Reviews ({{ game.comments?.length }})"> 
                <div *ngFor="let comment of game.comments">
                    <div class="game-details-comment">
                        <h3>{{ comment.user }}</h3>
                        <p>Rating: {{ comment.rating }}</p>
                        <p>{{ comment.comment }}</p>
                    </div>
                </div>
        </mat-tab>
    </div>
  </mat-tab-group>